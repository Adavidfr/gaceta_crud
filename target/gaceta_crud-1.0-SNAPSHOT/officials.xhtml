<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Gaceta CRUD</title>
</h:head>

<h:body>
<h:form id="frm">

    <p:commandButton value="Nuevo" icon="pi pi-plus"
                     actionListener="#{officialBean.nuevo}"
                     update=":frm:dlg"
                     oncomplete="PF('dlgW').show()"/>

    <p:dataTable value="#{officialBean.list}" var="o"
                 paginator="true" rows="5" style="margin-top:10px">

        <p:column headerText="Publicado">
            <h:outputText value="#{o.publishedOn}"/>
        </p:column>

        <p:column headerText="Fecha">
            <h:outputText value="#{o.date}">
                <f:convertDateTime pattern="yyyy-MM-dd"/>
            </h:outputText>
        </p:column>

        <p:column headerText="Tr치mite">
            <h:outputText value="#{o.applicationNumber}"/>
        </p:column>

        <p:column headerText="Denominaci칩n">
            <h:outputText value="#{o.denomination}"/>
        </p:column>

        <p:column headerText="Acciones" style="width:200px">
            <p:commandButton value="Editar" icon="pi pi-pencil"
                             actionListener="#{officialBean.editar(o)}"
                             update=":frm:dlg"
                             oncomplete="PF('dlgW').show()"/>

            <p:commandButton value="Eliminar" icon="pi pi-trash"
                             actionListener="#{officialBean.eliminar(o)}"
                             process="@this"
                             update=":frm"
                             styleClass="ui-button-danger"/>
        </p:column>
    </p:dataTable>

    <p:dialog id="dlg" widgetVar="dlgW" header="Aviso Oficial" modal="true" width="650">
        <p:panelGrid columns="2" styleClass="ui-fluid">
            <h:outputText value="Publicado:"/>
            <p:inputText value="#{officialBean.form.publishedOn}"/>

            <h:outputText value="Fecha:"/>
            <p:datePicker value="#{officialBean.form.date}" pattern="yyyy-MM-dd"/>

            <h:outputText value="Tr치mite:"/>
            <p:inputText value="#{officialBean.form.applicationNumber}"/>

            <h:outputText value="Denominaci칩n:"/>
            <p:inputTextarea value="#{officialBean.form.denomination}" rows="3"/>

            <h:outputText value="Correcto:"/>
            <p:inputTextarea value="#{officialBean.form.proper}" rows="2"/>
        </p:panelGrid>

        <p:separator/>

        <p:commandButton value="Guardar" icon="pi pi-check"
                         actionListener="#{officialBean.guardar}"
                         update=":frm"
                         oncomplete="PF('dlgW').hide()"/>
    </p:dialog>

</h:form>
</h:body>
</html>
